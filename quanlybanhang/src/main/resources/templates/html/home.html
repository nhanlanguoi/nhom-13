<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<head>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trang Chủ</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/genaral.css" />
</head>

<body>

  <div th:if="${showLoginPopup}" class="popup-overlay">
    <div class="popup-box">
      <form method="get" action="/" style="text-align: right;">
        <button type="submit" style="background: none; border: none; font-size: 24px; cursor: pointer;">&times;</button>
      </form>
      <h2>Bạn chưa đăng nhập</h2>
      <a href="/login" class="btn">Đăng nhập</a>
      <a href="/register" class="btn">Đăng ký</a>
    </div>
  </div>

  <header class="native-bar" th:fragment="mainHeader">
    <div class="native-bar-flex container">
      <div class="logo">
        <a href="/" style="cursor:pointer;"><img src="/images/logo.png" alt="Logo" /></a>
      </div>
      <div class="search-container">
        <form id="search-form" action="/search" method="get" style="display: flex; width: 100%;">
          <input class="search-input" type="text" name="tag" id="search-input-main"
            placeholder="Tìm kiếm theo tags sản phẩm..." autocomplete="off" />
          <button class="search-button" type="submit"><i class="fas fa-search"></i></button>
        </form>
        <div class="search-results-box" id="search-results-main">
        </div>
      </div>
      <nav class="header-nav">
        <a href="#" class="nav-item call"><i class="fas fa-phone"></i> <span>Gọi mua hàng</span></a>
        <a href="/cart" class="nav-item buymaket"><i class="fas fa-shopping-cart"></i> <span>Giỏ hàng</span></a>
        <a href="/profile" class="nav-item profile"><i class="fas fa-user"></i> <span>Tài khoản</span></a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="hero-section">
      <div class="category-nav">
        <button class="category-button" data-category="Điện thoại"><i class="fas fa-mobile-alt"></i> Điện thoại</button>
        <button class="category-button" data-category="Laptop"><i class="fas fa-laptop"></i> Laptop</button>
        <button class="category-button" data-category="Đồng hồ"><i class="fas fa-stopwatch"></i> Đồng hồ</button>
        <button class="category-button" data-category="Tivi"><i class="fas fa-tv"></i> Tivi</button>
        <button class="category-button" data-category="Phụ kiện"><i class="fas fa-headphones"></i> Phụ kiện</button>
        <button class="category-button" data-category="Sim, thẻ"><i class="fas fa-sim-card"></i> Sim, thẻ</button>
      </div>
      <div class="ad-banner">
        <img src="https://via.placeholder.com/900x300?text=Banner+Quảng+Cáo+Hấp+Dẫn" alt="Quảng cáo" />
      </div>
    </section>

    <section class="product-display">
      <h2 class="section-title">Sản phẩm</h2>
      <div class="products-grid" id="products-grid-main">
        <div class="tag-product" th:each="product : ${products}"
          th:if="${products != null and not #lists.isEmpty(products)}">
          <a th:href="@{/product/{productid}/{id}(productid=${product.id}, id=${product.variants[0].id} , colorid =${product.variants[0].colorprices[0].id})}"
            class="product-link">
            <img class="product-image" th:src="${product.variants[0].image}" alt="Hình ảnh sản phẩm"
              onerror="this.onerror=null;this.src='/images/placeholder.png';" />
            <div class="product-info">
              <p class="product-name" th:text="${product.name}">Tên sản phẩm mẫu</p>
              <p class="product-price" th:text="${product.variants[0].colorprices[0].formattedPrice} + '₫'">Giá:
                10.000.000₫</p>
              <p class="product-brand" th:text="'Thương hiệu: ' + ${product.brand}">Thương hiệu: ABC</p>
            </div>
          </a>
        </div>
      </div>
      <p id="no-products-message" style="display:none; text-align:center; margin-top:20px;">Không có sản phẩm nào thuộc
        danh mục này.</p>
      <div th:if="${products == null or #lists.isEmpty(products)}" id="initial-no-products-container">
        <p id="initial-no-products-message">Hiện chưa có sản phẩm nào.</p>
      </div>
    </section>
  </main>

  <footer class="footer" th:fragment="mainFooter">
    <div class="footer-container container">
      <div class="footer-column">
        <h4>Tổng đài hỗ trợ miễn phí</h4>
        <p><i class="fas fa-phone-alt"></i> Gọi mua hàng: <strong>1800.2097</strong> (7:30 - 22:00)</p>
        <p><i class="fas fa-headset"></i> Khiếu nại: <strong>1800.2063</strong> (8:00 - 21:30)</p>
        <p><i class="fas fa-tools"></i> Bảo hành: <strong>1800.2064</strong> (8:00 - 21:00)</p>
      </div>
      <div class="footer-column">
        <h4>Thông tin và chính sách</h4>
        <ul>
          <li><a href="#">Chính sách bảo hành</a></li>
          <li><a href="#">Hướng dẫn mua hàng online</a></li>
          <li><a href="#">Chính sách đổi trả</a></li>
          <li><a href="#">Giao hàng & thanh toán</a></li>
          <li><a href="#">Hướng dẫn mua hàng trả góp</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h4>Dịch vụ và thông tin khác</h4>
        <ul>
          <li><a href="#">Khách hàng doanh nghiệp (B2B)</a></li>
          <li><a href="#">Ưu đãi thanh toán</a></li>
          <li><a href="#">Quy chế hoạt động</a></li>
          <li><a href="#">Chính sách xử lý dữ liệu cá nhân</a></li>
          <li><a href="#">Liên hệ hợp tác kinh doanh</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h4>Kết nối với chúng tôi</h4>
        <div class="social-icons">
          <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
          <a href="#" aria-label="Youtube"><i class="fab fa-youtube"></i></a>
          <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
          <a href="#" aria-label="Tiktok"><i class="fab fa-tiktok"></i></a>
        </div>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; <span id="current-year"></span> Bản quyền thuộc về [Tên công ty của bạn].</p>
    </div>
  </footer>

  <script th:src="@{/js/home.js}"></script>

  <script th:src="@{/js/search.js}"></script>
</body>

</html>